<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mode Biometric Attendance System</title>
<style>
  body { font-family: Arial, sans-serif; background-color: #f4f4f4; padding: 20px; }
  h1, h2 { text-align: center; }
  table { width: 80%; margin: auto; border-collapse: collapse; }
  th, td { border: 1px solid #333; padding: 8px; text-align: center; }
  th { background-color: #555; color: white; }
  tr:nth-child(even) { background-color: #ddd; }
</style>
</head>
<body>
<h1>Mode Biometric Attendance System</h1>
<h2>Live Attendance Log</h2>

<table id="attendanceTable">
  <tr>
    <th>Name</th>
    <th>ID</th>
    <th>Status</th>
  </tr>
</table>

<script>
const READ_API_KEY = "61XG3VC5ZBSCPYRK"; // ThingSpeak Read API key
const CHANNEL_ID = "3095006"; // Your ThingSpeak Channel ID

async function loadData() {
  try {
    const url = https://api.thingspeak.com/channels/${CHANNEL_ID}/feeds.json?api_key=${READ_API_KEY}&results=20;
    const response = await fetch(url);
    const data = await response.json();
    const feeds = data.feeds;

    const table = document.getElementById("attendanceTable");
    // Clear old rows except header
    table.innerHTML = "<tr><th>Name</th><th>ID</th><th>Status</th></tr>";

    feeds.forEach(f => {
      const row = `<tr>
        <td>${f.field1 || ""}</td>
        <td>${f.field2 || ""}</td>
        <td>${f.field3 || ""}</td>
      </tr>`;
      table.innerHTML += row;
    });

  } catch (err) {
    console.error("Error fetching ThingSpeak data:", err);
  }
}

// Load immediately and refresh every 10 seconds
loadData();
setInterval(loadData, 10000);
</script>
</body>
</html>
