
<html>
<head>
  <title>Attendance Log</title>
  <style>
    table { border-collapse: collapse; width: 80%; margin: 20px auto; }
    th, td { border: 1px solid #000; padding: 8px; text-align: center; }
    th { background-color: #4CAF50; color: white; }
  </style>
</head>
<body>
  <h2 style="text-align:center;">Live Attendance Log</h2>
  <table id="attendanceTable">
    <tr>
      <th>Name</th>
      <th>ID</th>
      <th>Status</th>
    </tr>
  </table>

  <script>
    const readAPIKey = "YOUR_READ_API_KEY"; // replace with your ThingSpeak Read API key
    const channelID = "YOUR_CHANNEL_ID";    // replace with your ThingSpeak channel ID

    async function updateTable() {
      const response = await fetch(`https://api.thingspeak.com/channels/${channelID}/feeds.json?api_key=${readAPIKey}&results=10`);
      const data = await response.json();
      const table = document.getElementById("attendanceTable");

      // Remove old rows
      table.innerHTML = `
        <tr>
          <th>Name</th>
          <th>ID</th>
          <th>Status</th>
        </tr>
      `;

      // Add latest entries
      data.feeds.forEach(feed => {
        const row = table.insertRow();
        row.insertCell(0).innerText = feed.field1 || "";
        row.insertCell(1).innerText = feed.field2 || "";
        row.insertCell(2).innerText = feed.field3 || "";
      });
    }

    setInterval(updateTable, 5000); // refresh every 5 seconds
    updateTable(); // load immediately
  </script>
</body>
</html>