<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mode Biometric Attendance System</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f5f5; text-align:center; padding:20px; }
  h1 { color: #333; }
  table { margin: 0 auto; border-collapse: collapse; width: 80%; background: #fff; }
  th, td { border: 1px solid #888; padding: 8px; text-align: center; }
  th { background-color: #333; color: #fff; }
</style>
</head>
<body>

<h1>Mode Biometric Attendance System</h1>
<h2>Live Attendance Log</h2>

<table id="attendanceTable">
  <thead>
    <tr>
      <th>Timestamp</th>
      <th>Name</th>
      <th>ID</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <!-- Data will be inserted here -->
  </tbody>
</table>

<script>
const channelID = "3095006"; // Your ThingSpeak channel ID
const readAPIKey = "61XG3VC5ZBSCPYRK"; // Your ThingSpeak read API key
const updateInterval = 5000; // milliseconds

async function fetchData() {
  try {
    const url = `https://api.thingspeak.com/channels/${channelID}/feeds.json?api_key=${readAPIKey}&results=50`;
    const response = await fetch(url);
    const data = await response.json();
    const feeds = data.feeds;
    const tableBody = document.querySelector("#attendanceTable tbody");
    tableBody.innerHTML = ""; // Clear previous table

    feeds.forEach(feed => {
      const row = document.createElement("tr");
      const timestamp = new Date(feed.created_at).toLocaleString();
      const name = feed.field1 || "-";
      const id = feed.field2 || "-";
      const status = feed.field3 || "-";

      row.innerHTML = `<td>${timestamp}</td><td>${name}</td><td>${id}</td><td>${status}</td>`;
      tableBody.appendChild(row);
    });
  } catch (error) {
    console.error("Error fetching data:", error);
  }
}

// Initial fetch
fetchData();

// Refresh every 5 seconds
setInterval(fetchData, updateInterval);
</script>

</body>
</html>

